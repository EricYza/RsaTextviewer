{% extends "base.html" %}

{% block title %}Home Â· Text Viewer{% endblock %}

{% block content %}
<section class="card">
  <h2>Upload a new text file</h2>
  <form action="{{ url_for('main.index') }}" method="post" enctype="multipart/form-data" class="form-grid">
    <label for="display_name">Display name</label>
    <input type="text" id="display_name" name="display_name" placeholder="Leave empty to use the original filename">

    <label for="file">TXT file</label>
    <input type="file" id="file" name="file" accept=".txt" required>

    <button type="submit">Upload</button>
  </form>
</section>

<section class="card">
  <h2>Files</h2>
  {% if files %}
    <table class="file-table">
      <thead>
        <tr>
          <th>Display name</th>
          <th>Original filename</th>
          <th>Created at</th>
          <th class="actions">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for file in files %}
          <tr>
            <td data-label="Display name">{{ file.display_name }}</td>
            <td data-label="Original filename">{{ file.original_filename }}</td>
            <td data-label="Created at">{{ file.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td class="actions">
              <a class="btn" href="{{ url_for('main.detail', file_id=file.id) }}">View</a>
              <a class="btn secondary" href="{{ url_for('main.edit', file_id=file.id) }}">Edit</a>
              <form action="{{ url_for('main.delete', file_id=file.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this file?');">
                <button type="submit" class="btn danger">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No files yet. Upload a TXT file to get started.</p>
  {% endif %}
</section>
{% endblock %}
